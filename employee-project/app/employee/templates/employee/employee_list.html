{% extends 'base.html' %}
{% load static %}

{% block title %}Employee List{% endblock %}

{% block content %}
    {% include 'employee/includes/header.html' %}
    <h2>Employee List</h2>
    <table>
        <!-- Table content specific to employees -->
        <thead>
            <tr>
                <th>First Name</th>
                <th>Last Name</th>
                <th>Department</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for employee in employees %}
                <tr>
                    <td>{{ employee.first_name }}</td>
                    <td>{{ employee.last_name }}</td>
                    <td>{{ employee.department }}</td>
                    <td>
                        <button class="edit-employee" data-id="{{ employee.pk }}">Edit</button>
                        <button class="delete-employee" data-id="{{ employee.pk }}">Delete</button>
                    </td>
                </tr>
            {% empty %}
                <tr>
                    <td colspan="4">No employees available.</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
    
    <!-- Create/Update Employee Modal -->
    <div class="modal" id="employee-modal">
        <div class="modal-content">
            <span class="close" id="close-employee-modal">&times;</span>
            <h2>Create/Update Employee</h2>
            <form method="post" enctype="multipart/form-data">
                {% csrf_token %}
                {{ form.as_p }}
                <button type="submit">Save</button>
                <button class="cancel" id="cancel-employee-modal">Cancel</button>
            </form>
        </div>
    </div>
    
    <!-- Delete Employee Modal -->
    <div class="modal" id="delete-modal">
        <div class="modal-content">
            <h2>Delete Employee</h2>
            <p>Are you sure you want to delete {{ employee.first_name }} {{ employee.last_name }}?</p>
            <form method="post">
                {% csrf_token %}
                <button type="submit" class="btn btn-danger">Delete</button>
                <button class="btn btn-secondary" id="close-delete-modal">Cancel</button>
            </form>
        </div>
    </div>
    
    <button class="create-employee" data-modal-id="employee-modal">Create Employee</button>
    
    <!-- Include the external JavaScript file -->
    <script src="{% static 'js/employee.js' %}"></script>
{% endblock %}
